<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拈花惹草：授粉者之旅 | Pollinator Project</title>

    <!-- Fonts: Noto Sans TC (UI) and Noto Serif TC (Titles) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500&family=Noto+Serif+TC:wght@600;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Markdown Parser (for AI responses) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="antialiased">

    <!-- WebGL Canvas Container -->
    <div id="canvas-container"></div>

    <!-- Fixed Header -->
    <header id="main-header"
        class="ui-header flex flex-col md:flex-row justify-between items-start md:items-center gap-4 fade-in"
        style="animation-delay: 0.2s;">

        <!-- Left: Logo -->
        <div class="flex items-center gap-3 interactive-element cursor-pointer self-start md:self-auto"
            onclick="switchPage('home')">
            <div
                class="w-8 h-8 border border-gray-400 rounded-full flex items-center justify-center opacity-90 bg-black/50 backdrop-blur-sm transition-all duration-300 flex-shrink-0">
                <div class="w-2 h-2 bg-gray-300 rounded-full"></div>
                <div class="w-2 h-2 bg-[#D4AF37] rounded-full ml-1"></div>
            </div>
            <span class="uppercase tracking-widest text-xs font-semibold text-gray-400 whitespace-nowrap">POLLINATOR
                PROJECT</span>
        </div>

        <!-- Right: Navigation -->
        <nav class="interactive-element w-full md:w-auto overflow-hidden flex items-center gap-4">
            <!-- Added overflow-x-auto for mobile scrolling -->
            <ul id="nav-container"
                class="flex-grow md:flex-grow-0 flex md:justify-end space-x-6 md:space-x-8 text-sm md:text-base font-medium text-gray-400 tracking-wide bg-black/50 backdrop-blur-md border border-white/10 px-6 py-2 rounded-full shadow-lg transition-all duration-300 overflow-x-auto scrollbar-hide whitespace-nowrap mask-linear-gradient">
                <!-- Change: Replaced <a> tags with <button> tags to prevent any link/tab behavior in iframes -->
                <li><button onclick="switchPage('home')"
                        class="nav-link hover:text-[#D4AF37] transition-colors duration-300 text-[#D4AF37] focus:outline-none">首頁</button>
                </li>
                <li><button onclick="switchPage('carrier')"
                        class="nav-link hover:text-[#D4AF37] transition-colors duration-300 focus:outline-none">關於載體</button>
                </li>
                <li><button onclick="switchPage('knowledge')"
                        class="nav-link hover:text-[#D4AF37] transition-colors duration-300 focus:outline-none">授粉知識</button>
                </li>
                <li><button onclick="switchPage('species')"
                        class="nav-link hover:text-[#D4AF37] transition-colors duration-300 focus:outline-none">物種檔案</button>
                </li>
                <li><button onclick="switchPage('team')"
                        class="nav-link hover:text-[#D4AF37] transition-colors duration-300 focus:outline-none">製作團隊</button>
                </li>
            </ul>

            <!-- Settings / Key Management -->
            <button onclick="manageApiKey()" class="text-gray-500 hover:text-[#D4AF37] transition-colors p-2"
                title="設定 Gemini API Key">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4" />
                </svg>
            </button>
        </nav>
    </header>

    <!-- Page 1: Home -->
    <section id="home-page" class="page-section active fade-in" style="animation-delay: 0.8s;">
        <div class="flex-grow flex items-center justify-between">
            <!-- Content Block -->
            <div class="w-full md:w-5/12 text-left content-block z-20">
                <!-- Reverted to horizontal block layout -->
                <div
                    class="border-l-2 border-[#D4AF37] pl-6 py-6 bg-black/40 backdrop-blur-sm rounded-r-xl border-t border-r border-b border-white/5">

                    <h2 class="text-[#D4AF37] uppercase tracking-[0.3em] text-xs md:text-sm font-bold mb-2">授粉者之旅</h2>

                    <h1 class="serif-font text-5xl md:text-7xl text-white leading-tight mb-4 drop-shadow-lg">
                        拈花惹草
                    </h1>

                    <div class="h-px w-20 bg-white/20 mb-6"></div>

                    <p class="text-gray-300 leading-relaxed text-sm md:text-lg font-light serif-font mb-8">
                        一場關於花粉傳遞<br>與知識傳遞的手冊
                    </p>

                    <div>
                        <button onclick="switchPage('knowledge')"
                            class="animate-subtle-float group flex items-center gap-3 text-xs md:text-sm uppercase tracking-widest font-semibold text-gray-300 hover:text-[#D4AF37] transition-colors cursor-pointer">
                            <span>開始探索</span>
                            <span class="w-8 h-[1px] bg-current group-hover:w-12 transition-all duration-300"></span>
                        </button>
                    </div>
                </div>
            </div>
            <!-- Spacer to balance layout -->
            <div class="hidden md:block md:w-1/2 h-full"></div>
        </div>

        <footer class="flex justify-between items-end text-xs text-gray-500 pb-4 md:pb-8 content-block">
            <div class="uppercase tracking-wider">Est. 2024</div>
            <div class="flex gap-4">
                <span class="hidden md:inline">SCROLL TO EXPLORE</span>
                <span class="md:hidden">SWIPE / SCROLL</span>
                <span class="animate-bounce text-[#D4AF37]">↓</span>
            </div>
        </footer>
    </section>

    <!-- Page: Carrier -->
    <section id="carrier" class="page-section solid-page">
        <div class="max-w-4xl mx-auto w-full pt-4 md:pt-12">
            <h1 class="serif-font text-3xl md:text-4xl text-[#D4AF37] mb-6">關於載體</h1>
            <div class="h-1 w-20 bg-gray-700 mb-8 md:mb-12"></div>
            <p class="text-gray-400 leading-loose text-sm md:text-base">
                這本書不僅僅是數位的呈現，它是一個關於記憶與傳遞的隱喻。透過 WebGL 技術，我們在瀏覽器中重建了紙張的纖維質感與光影的幾何關係。每一個多邊形的蜜蜂，都象徵著自然界中微小卻不可或缺的連結。
                <br><br>
                在設計上，我們採用了極簡的深色美學，試圖在數位螢幕的強光中，為讀者開闢出一塊得以喘息、靜謐的閱讀空間。
            </p>
        </div>
    </section>

    <!-- Page 2: Knowledge (Gemini Powered) -->
    <section id="knowledge" class="page-section solid-page">
        <div class="max-w-4xl mx-auto w-full pt-4 md:pt-12 h-full flex flex-col">
            <h1 class="serif-font text-3xl md:text-4xl text-[#D4AF37] mb-2">授粉知識：蜂巢意識</h1>
            <p class="text-gray-500 text-xs md:text-sm mb-6 uppercase tracking-wider">Powered by Gemini AI</p>
            <div class="h-1 w-20 bg-gray-700 mb-8"></div>

            <div class="flex-grow flex flex-col gap-6">
                <div class="bg-[#111] border border-white/10 rounded-xl p-4 md:p-6 shadow-2xl">
                    <label class="block text-gray-400 text-sm mb-3">向自然嚮導提問：</label>
                    <div class="flex flex-col md:flex-row gap-3">
                        <input type="text" id="hive-input" placeholder="例如：蜜蜂為什麼會跳舞？蝴蝶喜歡什麼顏色的花？"
                            class="flex-grow bg-[#050505] text-white border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#D4AF37] transition-colors placeholder-gray-600 text-sm md:text-base">
                        <button onclick="askHiveMind()"
                            class="bg-[#D4AF37] hover:bg-[#bfa34b] text-black font-bold px-6 py-3 rounded-lg transition-all flex items-center justify-center gap-2 md:min-w-[140px]">
                            <span>✨ 詢問</span>
                        </button>
                    </div>
                </div>

                <div id="hive-response-container"
                    class="flex-grow bg-[#0a0a0a] border border-white/5 rounded-xl p-6 md:p-8 overflow-y-auto relative min-h-[300px]">
                    <div id="hive-placeholder" class="text-center text-gray-600 mt-10 md:mt-20">
                        <div class="mb-4 text-4xl opacity-30">❁</div>
                        <p>知識就像花粉，等待傳遞。<br>請輸入問題，喚醒蜂巢意識。</p>
                        <p class="text-xs text-gray-700 mt-4">(若無法使用，請點擊右上角鑰匙圖示設定 API Key)</p>
                    </div>
                    <div id="hive-loading"
                        class="hidden absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-10">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                    <div id="hive-output" class="ai-response text-gray-300 hidden text-sm md:text-base"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Page 3: Species (Gemini Powered) -->
    <section id="species" class="page-section solid-page">
        <div class="max-w-4xl mx-auto w-full pt-4 md:pt-12">
            <h1 class="serif-font text-3xl md:text-4xl text-[#D4AF37] mb-2">物種檔案</h1>
            <p class="text-gray-500 text-xs md:text-sm mb-6 uppercase tracking-wider">AI Generated Archive</p>
            <div class="h-1 w-20 bg-gray-700 mb-8 md:mb-12"></div>

            <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-start">
                <div class="space-y-6">
                    <p class="text-gray-400 leading-relaxed text-sm md:text-base">
                        授粉者的世界遠比我們想像的廣闊。除了蜜蜂與蝴蝶，還有無數的甲蟲、蝙蝠甚至蜥蜴參與這場生命的傳遞。
                        <br><br>
                        點擊下方按鈕，讓 AI 為您從資料庫中隨機提取並介紹一位獨特的「授粉夥伴」。
                    </p>
                    <button onclick="generateSpeciesProfile()"
                        class="w-full border border-[#D4AF37] text-[#D4AF37] hover:bg-[#D4AF37] hover:text-black py-4 px-6 rounded-lg transition-all duration-300 uppercase tracking-widest text-sm font-bold flex items-center justify-center gap-3 group">
                        <span>✨ 探索新物種</span>
                        <span class="group-hover:rotate-180 transition-transform duration-500">❀</span>
                    </button>
                </div>

                <div
                    class="bg-[#111] border border-[#D4AF37]/30 rounded-xl p-6 md:p-8 relative min-h-[400px] flex flex-col justify-center items-center text-center">
                    <div id="species-loading"
                        class="hidden absolute inset-0 bg-[#111] z-10 flex items-center justify-center rounded-xl">
                        <div class="text-[#D4AF37] animate-pulse text-sm tracking-widest">生成檔案中...</div>
                    </div>

                    <div id="species-content" class="w-full">
                        <div
                            class="w-24 h-24 rounded-full bg-[#1a1a1a] border border-[#333] mx-auto mb-6 flex items-center justify-center text-3xl text-gray-600">
                            ?</div>
                        <h3 class="serif-font text-2xl text-white mb-2">等待探索</h3>
                        <p class="text-[#8A9A5B] italic text-sm mb-6">Unknown Species</p>
                        <div class="h-px w-16 bg-gray-800 mx-auto mb-6"></div>
                        <p class="text-gray-500 text-sm">點擊左側按鈕開始探索。</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Page 4: Team -->
    <section id="team" class="page-section solid-page">
        <div class="max-w-4xl mx-auto w-full pt-4 md:pt-12 h-full flex flex-col items-center">
            <h1 class="serif-font text-3xl md:text-4xl text-[#D4AF37] mb-6">製作團隊</h1>
            <div class="h-1 w-20 bg-gray-700 mb-8 md:mb-12"></div>

            <!-- Interactive 3D Flip Card Container -->
            <div class="perspective-container w-full max-w-md h-[400px] relative mt-4">
                <div id="team-card"
                    class="team-card card-glass w-full h-full flex flex-col items-center justify-center p-8 text-center"
                    onmousedown="startTeamDrag(event)" ontouchstart="startTeamDrag(event)">

                    <!-- Dynamic Content -->
                    <div
                        class="w-24 h-24 rounded-full bg-gray-800 border-2 border-[#D4AF37] mb-6 overflow-hidden flex items-center justify-center relative">
                        <span id="member-icon" class="text-4xl">👤</span>
                    </div>

                    <h2 id="member-name" class="text-2xl text-white font-bold mb-2 serif-font">Member Name</h2>
                    <p id="member-role" class="text-[#D4AF37] text-sm uppercase tracking-widest mb-6">Role Title</p>

                    <div class="h-px w-12 bg-white/20 mb-6"></div>

                    <p id="member-desc" class="text-gray-400 text-sm leading-relaxed">
                        Description goes here.
                    </p>

                    <div class="mt-auto pt-8 flex gap-2 justify-center opacity-30">
                        <span class="w-2 h-2 rounded-full bg-white"></span>
                        <span class="w-2 h-2 rounded-full bg-white"></span>
                        <span class="w-2 h-2 rounded-full bg-white"></span>
                    </div>
                </div>

                <!-- Navigation Hints -->
                <div
                    class="absolute top-1/2 -left-12 -translate-y-1/2 hidden md:block opacity-50 text-2xl animate-pulse">
                    ‹</div>
                <div
                    class="absolute top-1/2 -right-12 -translate-y-1/2 hidden md:block opacity-50 text-2xl animate-pulse">
                    ›</div>
            </div>

            <p class="mt-8 text-gray-500 text-xs tracking-wider uppercase">Drag or Swipe to Flip</p>
        </div>


    </section>

    <!-- Three.js Script & Logic -->
    <script src="main.js"></script>
</body>

</html>